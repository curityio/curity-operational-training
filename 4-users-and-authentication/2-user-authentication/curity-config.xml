<config xmlns="http://tail-f.com/ns/config/1.0">
  <environments xmlns="https://curity.se/ns/conf/base">
    <environment>
      <base-url tags=" I3tSVU5USU1FX0JBU0VfVVJMfQ== ">https://login.demo.example</base-url>
      <admin-service>
        <http>
          <base-url tags=" I3tBRE1JTl9CQVNFX1VSTH0= ">https://admin.demo.example</base-url>
          <web-ui>
            <admin-federated-login>
              <using-oauth-profile xmlns="https://curity.se/ns/conf/profile/oauth">
                <http-client>internal_http_client</http-client>
                <oauth-profile>token-service</oauth-profile>
                <client>admin_ui_client</client>
              </using-oauth-profile>
            </admin-federated-login>
          </web-ui>
          <restconf>
            <oauth xmlns="https://curity.se/ns/conf/profile/oauth">
              <oauth-profile>token-service</oauth-profile>
              <client>devops_dashboard_restconf_client</client>
            </oauth>
          </restconf>
          <devops-dashboard xmlns="https://curity.se/ns/conf/profile/oauth">
            <authorization-manager>default</authorization-manager>
            <client>devops_dashboard_restconf_client</client>
          </devops-dashboard>
        </http>
      </admin-service>
      <services>
        <zones>
          <default-zone>
            <email-provider>smtp</email-provider>
            <symmetric-key tags=" I3tTWU1NRVRSSUNfS0VZfQ== ">data:text/plain;aes,v:S.cm54MEl4dE5aVlFNMTc5bg==.GeDK0BOp8K83ciKVOGPMrw==.r4cViz-4UHiozouSVijTQADnq4hFA3HVWwOmniBlJRLiVRUPugf-_a_qnnQL0IET066-b_CHlmDnVz_QridhSEOpv1zU8eLjxnj5m-3zJTU=.JG73cwNYIQ_tTG7wTmGxgZAdCAlK5ufY3nqtwTpAda0=</symmetric-key>
            <allowed-origins-for-cors>https://admin.demo.example</allowed-origins-for-cors>
          </default-zone>
        </zones>
        <service-role>
          <id>default</id>
          <protocol>http</protocol>
          <webfinger/>
          <endpoints>applications</endpoints>
          <endpoints>authentication-service-anonymous</endpoints>
          <endpoints>authentication-service-authentication</endpoints>
          <endpoints>authentication-service-registration</endpoints>
          <endpoints>graphql-users-service</endpoints>
          <endpoints>token-service-anonymous</endpoints>
          <endpoints>token-service-assisted-token</endpoints>
          <endpoints>token-service-authorize</endpoints>
          <endpoints>token-service-introspect</endpoints>
          <endpoints>token-service-revoke</endpoints>
          <endpoints>token-service-session</endpoints>
          <endpoints>token-service-token</endpoints>
          <endpoints>token-service-userinfo</endpoints>
          <endpoints>user-service</endpoints>
        </service-role>
      </services>
    </environment>
  </environments>
  <profiles xmlns="https://curity.se/ns/conf/base">
    <profile>
      <id>Applications</id>
      <type xmlns:apps="https://curity.se/ns/conf/profile/apps">apps:apps-service</type>
      <settings>
        <apps-service xmlns="https://curity.se/ns/conf/profile/apps">
          <oauth-profile-id>token-service</oauth-profile-id>
        </apps-service>
      </settings>
      <endpoints>
        <endpoint>
          <id>applications</id>
          <uri>/apps</uri>
          <endpoint-kind>apps-anonymous</endpoint-kind>
        </endpoint>
      </endpoints>
    </profile>
    <profile>
      <id>authentication-service</id>
      <type xmlns:auth="https://curity.se/ns/conf/profile/authentication">auth:authentication-service</type>
      <settings>
        <authentication-service xmlns="https://curity.se/ns/conf/profile/authentication">
          <persisted-sso-session>true</persisted-sso-session>
          <authentication-actions>
            <authentication-action>
              <id>select_factor</id>
              <multi-factor-condition xmlns="https://curity.se/ns/ext-conf/multi-factor-condition">
                <disable-second-factor-subject-check>true</disable-second-factor-subject-check>
                <always>
                  <second-factor>
                    <id>employees</id>
                  </second-factor>
                </always>
              </multi-factor-condition>
            </authentication-action>
            <authentication-action>
              <id>set-subject</id>
              <script-transformer xmlns="https://curity.se/ns/ext-conf/script-transformer">
                <transformation-procedure>set-subject-procedure</transformation-procedure>
              </script-transformer>
            </authentication-action>
          </authentication-actions>
          <authenticators>
            <authenticator>
              <id>email</id>
              <description>Email authentication</description>
              <email>
                <account-manager>default-account-manager</account-manager>
              </email>
            </authenticator>
            <authenticator>
              <id>employees</id>
              <authentication-actions>
                <login>set-subject</login>
              </authentication-actions>
              <description>Sign in with the employee login policy </description>
              <oidc xmlns="https://curity.se/ns/conf/authenticators/oidc">
                <configuration-url tags=" I3tFTVBMT1lFRV9JRFBfT0lEQ19NRVRBREFUQX0= ">https://login.microsoftonline.com/7f071fbc-8bf2-4e61-bb48-dabd8e2f5b5a/v2.0/.well-known/openid-configuration</configuration-url>
                <client-id tags=" I3tFTVBMT1lFRV9JRFBfQ0xJRU5UX0lEfQ== ">cc55d59b-4c03-4435-9ab3-2c584f079c18</client-id>
                <client-secret tags=" I3tFTVBMT1lFRV9JRFBfQ0xJRU5UX1NFQ1JFVH0= ">data:text/plain;aes,v:S.Q2lWTm5YV0ZzbktTYzZKTg==.Lt82Qi8e5ZYQ6TTj7bjrww==.u2IngM1WXwyFvqG7JjSTzz0ubI4YaTMUEUDrL0YExE71_CgzevKLWv5R8xznvgCf.ouwxo8BM4eouQtIDUeWBB32HGL7DStxI6tGytUONcqA=</client-secret>
                <scope>openid email</scope>
                <use-subject-for-login-hint>true</use-subject-for-login-hint>
                <prompt-login>always</prompt-login>
              </oidc>
            </authenticator>
            <authenticator>
              <id>passkeys</id>
              <description>Sign in with a passkey</description>
              <required-authenticator-for-registration>email</required-authenticator-for-registration>
              <passkeys xmlns="https://curity.se/ns/conf/authenticators/passkeys">
                <allow-registration-during-login>true</allow-registration-during-login>
                <enable-discoverable-credentials>true</enable-discoverable-credentials>
                <account-manager>
                  <id>default-account-manager</id>
                </account-manager>
              </passkeys>
            </authenticator>
            <authenticator>
              <id>passwords</id>
              <description>Sign in with a password</description>
              <html-form xmlns="https://curity.se/ns/conf/authenticators/html-form">
                <account-manager>default-account-manager</account-manager>
                <credential-manager>default-credential-manager</credential-manager>
              </html-form>
            </authenticator>
            <authenticator>
              <id>username</id>
              <description>Identify the user</description>
              <username xmlns="https://curity.se/ns/ext-conf/username">
              </username>
            </authenticator>
          </authenticators>
          <protocols>
            <protocol>
              <id>default-simple-protocol</id>
              <simple-api/>
            </protocol>
          </protocols>
        </authentication-service>
      </settings>
      <endpoints>
        <endpoint>
          <id>authentication-service-anonymous</id>
          <uri>/authn/anonymous</uri>
          <endpoint-kind>auth-anonymous</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>authentication-service-authentication</id>
          <uri>/authn/authentication</uri>
          <endpoint-kind>auth-authentication</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>authentication-service-registration</id>
          <uri>/authn/registration</uri>
          <endpoint-kind>auth-registration</endpoint-kind>
        </endpoint>
      </endpoints>
      <token-issuers>
        <default-token-issuer>
          <jwt-issuer-settings>
            <algorithm>ES256</algorithm>
            <signing-key-id>default-signing-key</signing-key-id>
          </jwt-issuer-settings>
          <default-data-source>default-datasource</default-data-source>
        </default-token-issuer>
      </token-issuers>
    </profile>
    <profile>
      <id>token-service</id>
      <type xmlns:as="https://curity.se/ns/conf/profile/oauth">as:oauth-service</type>
      <expose-detailed-error-messages/>
      <settings>
        <authorization-server xmlns="https://curity.se/ns/conf/profile/oauth">
          <client-authentication>
            <symmetrically-signed-jwt>
              <signature-algorithm>HS512</signature-algorithm>
            </symmetrically-signed-jwt>
          </client-authentication>
          <authentication-service>
            <authentication-profile>authentication-service</authentication-profile>
          </authentication-service>
          <client-capabilities>
            <code>
            </code>
            <implicit/>
            <resource-owner-password-credentials>
              <credential-manager>default-credential-manager</credential-manager>
            </resource-owner-password-credentials>
            <client-credentials/>
            <introspection/>
            <token-exchange/>
            <assisted-token>
            </assisted-token>
          </client-capabilities>
          <scopes>
            <scope>
              <id>accounts</id>
            </scope>
            <scope>
              <id>accounts_migration</id>
            </scope>
            <scope>
              <id>address</id>
              <description>OpenId Connect address scope</description>
              <claims>address</claims>
            </scope>
            <scope>
              <id>email</id>
              <description>OpenId Connect email scope</description>
              <claims>email</claims>
              <claims>email_verified</claims>
            </scope>
            <scope>
              <id>openid</id>
              <description>Standard OpenID Connect scope</description>
              <claims>groups</claims>
            </scope>
            <scope>
              <id>phone</id>
              <description>OpenId Connect phone scope</description>
              <claims>phone_number</claims>
              <claims>phone_number_verified</claims>
            </scope>
            <scope>
              <id>profile</id>
              <description>OpenId Connect profile scope</description>
              <claims>birthdate</claims>
              <claims>family_name</claims>
              <claims>gender</claims>
              <claims>given_name</claims>
              <claims>locale</claims>
              <claims>middle_name</claims>
              <claims>name</claims>
              <claims>nickname</claims>
              <claims>picture</claims>
              <claims>preferred_username</claims>
              <claims>profile</claims>
              <claims>updated_at</claims>
              <claims>website</claims>
              <claims>zoneinfo</claims>
            </scope>
            <scope>
              <id>urn:se:curity:scopes:admin:api</id>
              <claims>groups</claims>
            </scope>
          </scopes>
          <claims>
            <claim>
              <name>address</name>
              <description>OpenID Connect address claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>birthdate</name>
              <description>OpenID Connect birthdate claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>email</name>
              <description>OpenID Connect email claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>email_verified</name>
              <description>OpenID Connect email_verified claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>family_name</name>
              <description>OpenID Connect family_name claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>gender</name>
              <description>OpenID Connect gender claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>given_name</name>
              <description>OpenID Connect given_name claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>groups</name>
              <value-provided-by>subject_claims_provider</value-provided-by>
              <transformation>
                <input-attribute-names>groups</input-attribute-names>
                <value-transformation-procedure>ZnVuY3Rpb24gdHJhbnNmb3JtKGF0dHJpYnV0ZXMpIHsKICByZXR1cm4gYXR0cmlidXRlcy5ncm91cHM7Cn0=</value-transformation-procedure>
              </transformation>
            </claim>
            <claim>
              <name>locale</name>
              <description>OpenID Connect locale claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>middle_name</name>
              <description>OpenID Connect middle_name claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>name</name>
              <description>OpenID Connect name claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>nickname</name>
              <description>OpenID Connect nickname claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>phone_number</name>
              <description>OpenID Connect phone_number claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>phone_number_verified</name>
              <description>OpenID Connect phone_number_verified claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>picture</name>
              <description>OpenID Connect picture claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>preferred_username</name>
              <description>OpenID Connect preferred_username claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>profile</name>
              <description>OpenID Connect profile claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>updated_at</name>
              <description>OpenID Connect updated_at claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>website</name>
              <description>OpenID Connect website claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claim>
              <name>zoneinfo</name>
              <description>OpenID Connect zoneinfo claim</description>
              <value-provided-by>account-manager-claims-provider</value-provided-by>
            </claim>
            <claims-value-provider>
              <id>account-manager-claims-provider</id>
              <account-manager-claims-provider xmlns="https://curity.se/ns/ext-conf/account-manager-claims-provider">
                <account-manager>
                  <id>default-account-manager</id>
                </account-manager>
              </account-manager-claims-provider>
            </claims-value-provider>
            <claims-value-provider>
              <id>admin_ui_claims_provider</id>
              <admin-groups-claims-provider xmlns="https://curity.se/ns/ext-conf/admin-groups-claims-provider"/>
            </claims-value-provider>
            <claims-value-provider>
              <id>subject_claims_provider</id>
              <authentication-subject-claims-provider xmlns="https://curity.se/ns/ext-conf/authentication-subject-claims-provider"/>
            </claims-value-provider>
            <claims-mappers>
              <claims-mapper>
                <id>default</id>
                <access_token>
                  <claim>groups</claim>
                </access_token>
                <id_token>
                  <claim>address</claim>
                  <claim>birthdate</claim>
                  <claim>email</claim>
                  <claim>email_verified</claim>
                  <claim>family_name</claim>
                  <claim>gender</claim>
                  <claim>given_name</claim>
                  <claim>locale</claim>
                  <claim>middle_name</claim>
                  <claim>name</claim>
                  <claim>nickname</claim>
                  <claim>phone_number</claim>
                  <claim>phone_number_verified</claim>
                  <claim>picture</claim>
                  <claim>preferred_username</claim>
                  <claim>profile</claim>
                  <claim>updated_at</claim>
                  <claim>website</claim>
                  <claim>zoneinfo</claim>
                </id_token>
                <userinfo>
                  <claim>address</claim>
                  <claim>birthdate</claim>
                  <claim>email</claim>
                  <claim>email_verified</claim>
                  <claim>family_name</claim>
                  <claim>gender</claim>
                  <claim>given_name</claim>
                  <claim>locale</claim>
                  <claim>middle_name</claim>
                  <claim>name</claim>
                  <claim>nickname</claim>
                  <claim>phone_number</claim>
                  <claim>phone_number_verified</claim>
                  <claim>picture</claim>
                  <claim>preferred_username</claim>
                  <claim>profile</claim>
                  <claim>updated_at</claim>
                  <claim>website</claim>
                  <claim>zoneinfo</claim>
                </userinfo>
              </claims-mapper>
              <default-claims-mapper>default</default-claims-mapper>
            </claims-mappers>
          </claims>
          <openid-connect>
            <expose-metadata>
            </expose-metadata>
          </openid-connect>
          <client-store>
            <config-backed>
              <client>
                <id>admin_ui_client</id>
                <client-name>Admin UI Federated Login Client</client-name>
                <description>The OAuth client that is used for Admin UI federated login.</description>
                <logo>data:image/svg+xml;base64,CjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2MHB4IgoJIGhlaWdodD0iMTYwcHgiIHZpZXdCb3g9IjAgMCA0My42IDQzLjYiIHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDMuNiA0My42OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjtzdHJva2U6IzYyNkM4NztzdHJva2Utd2lkdGg6MS4xMDQ1O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCS5zdDF7ZmlsbDojNjM2RDg2O30KCS5zdDJ7ZmlsbDojNjI2Qzg3O30KCS5zdDN7ZmlsbDpub25lO3N0cm9rZTojNjI2Qzg3O3N0cm9rZS13aWR0aDoxLjEwNDU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQo8L3N0eWxlPgo8ZGVmcz4KPC9kZWZzPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzksNDNINC42Yy0yLjIsMC00LTEuOC00LTRWNC42YzAtMi4yLDEuOC00LDQtNEgzOWMyLjIsMCw0LDEuOCw0LDRWMzlDNDMsNDEuMiw0MS4yLDQzLDM5LDQzeiIvPgo8Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSI2LjQiIGN5PSI0LjQiIHI9IjEuNCIvPgo8Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSIxMi4yIiBjeT0iNC40IiByPSIxLjQiLz4KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTcuOSIgY3k9IjQuNCIgcj0iMS40Ii8+CjxnPgoJPGc+CgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTMxLjksMjZsLTAuMywwLjNjLTEuNSwxLjUtMy4zLDIuMy01LDIuM2MtMi43LDAtNC43LTItNC43LTQuOGMwLTIuOCwxLjktNC44LDQuNi00LjhjMS42LDAsMy40LDAuNyw0LjcsMS44CgkJCWwwLjMsMC4ybDIuNi0yLjdsLTAuMy0wLjJjLTItMS43LTQuOC0yLjctNy41LTIuN2MtMywwLTUuNSwxLjQtNywzLjVoLTQuN2wtMC4zLDIuM2gzLjljLTAuMSwwLjQtMC4yLDAuOS0wLjMsMS4zSDEybC0wLjMsMi4zCgkJCWg2LjFjMC4xLDAuNSwwLjEsMC45LDAuMywxLjNoMGgtMC4zSDkuM2wtMC4zLDIuM2g4LjdoMC4zaDEuMWMxLjUsMi4yLDQuMSwzLjUsNy4yLDMuNWMzLjksMCw2LjYtMiw3LjktMy4ybDAuMy0wLjNMMzEuOSwyNnoiLz4KCQk8cG9seWdvbiBjbGFzcz0ic3QyIiBwb2ludHM9IjExLjQsMjIuNiA5LjYsMjIuNiA5LjQsMjQuOSAxMS4xLDI0LjkgCQkiLz4KCTwvZz4KPC9nPgo8bGluZSBjbGFzcz0ic3QzIiB4MT0iMC42IiB5MT0iOC4zIiB4Mj0iNDMiIHkyPSI4LjMiLz4KPC9zdmc+Cg==</logo>
                <symmetric-key>data:text/plain;aes,v:S.S2NxaTBqSVpKczN3c292aQ==.nxiTpc0Rofd9DiJVudMUNg==.qytqSezudPZHuKpC_J9JN9bwcv_fqOVM8aMl9GzHI-nd3BnxKHY7Tp9eS0tTZ9FWwYxI79ylbAmAZ__DeLYJCvn0We34SoETtB1HMdDRBQo=.xzByq9A02iQ1FcJtYY9pr95P8TdgrZVziNPlJzeixuQ=</symmetric-key>
                <redirect-uris>https://admin.demo.example/admin/login/handler</redirect-uris>
                <audience>admin_ui_client</audience>
                <scope>openid</scope>
                <scope>email</scope>
                <user-authentication>
                  <allowed-authenticators>employees</allowed-authenticators>
                  <force-authn>true</force-authn>
                </user-authentication>
                <capabilities>
                  <code>
                  </code>
                </capabilities>
              </client>
              <client>
                <id>console-client</id>
                <no-authentication>true</no-authentication>
                <redirect-uris>http://127.0.0.1/callback</redirect-uris>
                <proof-key>
                  <require-proof-key>true</require-proof-key>
                </proof-key>
                <scope>openid</scope>
                <user-authentication>
                  <allowed-authenticators>employees</allowed-authenticators>
                  <allowed-authenticators>passkeys</allowed-authenticators>
                  <allowed-authenticators>passwords</allowed-authenticators>
                </user-authentication>
                <capabilities>
                  <code>
                  </code>
                </capabilities>
                <validate-port-on-loopback-interfaces>false</validate-port-on-loopback-interfaces>
              </client>
              <client>
                <id>devops_dashboard_restconf_client</id>
                <client-name>DevOps Dashboard Client</client-name>
                <description>The OAuth client that is used to login to the DevOps dashboard.</description>
                <logo>data:image/svg+xml;base64,CjxzdmcgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjE2MHB4IgoJIGhlaWdodD0iMTYwcHgiIHZpZXdCb3g9IjAgMCA0My42IDQzLjYiIHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNDMuNiA0My42OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I0ZGRkZGRjtzdHJva2U6IzYyNkM4NztzdHJva2Utd2lkdGg6MS4xMDQ1O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCS5zdDF7ZmlsbDojNjM2RDg2O30KCS5zdDJ7ZmlsbDojNjI2Qzg3O30KCS5zdDN7ZmlsbDpub25lO3N0cm9rZTojNjI2Qzg3O3N0cm9rZS13aWR0aDoxLjEwNDU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQo8L3N0eWxlPgo8ZGVmcz4KPC9kZWZzPgo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMzksNDNINC42Yy0yLjIsMC00LTEuOC00LTRWNC42YzAtMi4yLDEuOC00LDQtNEgzOWMyLjIsMCw0LDEuOCw0LDRWMzlDNDMsNDEuMiw0MS4yLDQzLDM5LDQzeiIvPgo8Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSI2LjQiIGN5PSI0LjQiIHI9IjEuNCIvPgo8Y2lyY2xlIGNsYXNzPSJzdDEiIGN4PSIxMi4yIiBjeT0iNC40IiByPSIxLjQiLz4KPGNpcmNsZSBjbGFzcz0ic3QxIiBjeD0iMTcuOSIgY3k9IjQuNCIgcj0iMS40Ii8+CjxnPgoJPGc+CgkJPHBhdGggY2xhc3M9InN0MiIgZD0iTTMxLjksMjZsLTAuMywwLjNjLTEuNSwxLjUtMy4zLDIuMy01LDIuM2MtMi43LDAtNC43LTItNC43LTQuOGMwLTIuOCwxLjktNC44LDQuNi00LjhjMS42LDAsMy40LDAuNyw0LjcsMS44CgkJCWwwLjMsMC4ybDIuNi0yLjdsLTAuMy0wLjJjLTItMS43LTQuOC0yLjctNy41LTIuN2MtMywwLTUuNSwxLjQtNywzLjVoLTQuN2wtMC4zLDIuM2gzLjljLTAuMSwwLjQtMC4yLDAuOS0wLjMsMS4zSDEybC0wLjMsMi4zCgkJCWg2LjFjMC4xLDAuNSwwLjEsMC45LDAuMywxLjNoMGgtMC4zSDkuM2wtMC4zLDIuM2g4LjdoMC4zaDEuMWMxLjUsMi4yLDQuMSwzLjUsNy4yLDMuNWMzLjksMCw2LjYtMiw3LjktMy4ybDAuMy0wLjNMMzEuOSwyNnoiLz4KCQk8cG9seWdvbiBjbGFzcz0ic3QyIiBwb2ludHM9IjExLjQsMjIuNiA5LjYsMjIuNiA5LjQsMjQuOSAxMS4xLDI0LjkgCQkiLz4KCTwvZz4KPC9nPgo8bGluZSBjbGFzcz0ic3QzIiB4MT0iMC42IiB5MT0iOC4zIiB4Mj0iNDMiIHkyPSI4LjMiLz4KPC9zdmc+Cg==</logo>
                <no-authentication>true</no-authentication>
                <redirect-uris tags=" I3tBRE1JTl9CQVNFX1VSTH0vYWRtaW4vZGFzaGJvYXJkL2Fzc2lzdGVkLmh0bWw= ">https://admin.demo.example/admin/dashboard/assisted.html</redirect-uris>
                <proof-key>
                  <require-proof-key>true</require-proof-key>
                </proof-key>
                <refresh-token-ttl>disabled</refresh-token-ttl>
                <audience>urn:se:curity:audiences:admin:api</audience>
                <audience>devops_dashboard_restconf_client</audience>
                <scope>openid</scope>
                <scope>urn:se:curity:scopes:admin:api</scope>
                <user-authentication>
                  <allowed-authenticators>employees</allowed-authenticators>
                  <allowed-post-logout-redirect-uris tags=" I3tBRE1JTl9CQVNFX1VSTH0vYWRtaW4vZGFzaGJvYXJkL2Fzc2lzdGVkLmh0bWw= ">https://admin.demo.example/admin/dashboard/assisted.html</allowed-post-logout-redirect-uris>
                </user-authentication>
                <allowed-origins tags=" I3tBRE1JTl9CQVNFX1VSTH0= ">https://admin.demo.example</allowed-origins>
                <capabilities>
                  <code>
                  </code>
                </capabilities>
              </client>
              <client>
                <id>introspect-client</id>
                <secret tags=" I3tJTlRST1NQRUNUX0NMSUVOVF9TRUNSRVR9 ">$5$5qWUGeg1gI8o94t5$NxrfMFeFOh3UOm82sUjEryvHCnOJNEHsAojN2IznIt0</secret>
                <capabilities>
                  <introspection/>
                </capabilities>
              </client>
              <client>
                <id>migration-client</id>
                <secret tags=" I3tNSUdSQVRJT05fQ0xJRU5UX1NFQ1JFVH0= ">$5$m1bLRjaUj2/j4s4D$XB/ECI.noFFGJgGsVO9J4k1bJSSlPtk.HHe/e2i7L32</secret>
                <scope>accounts_migration</scope>
                <capabilities>
                  <client-credentials/>
                </capabilities>
              </client>
            </config-backed>
          </client-store>
        </authorization-server>
      </settings>
      <endpoints>
        <endpoint>
          <id>token-service-anonymous</id>
          <uri>/~</uri>
          <endpoint-kind>oauth-anonymous</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-assisted-token</id>
          <uri>/oauth/v2/oauth-assisted-token</uri>
          <endpoint-kind>oauth-assisted-token</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-authorize</id>
          <uri>/oauth/v2/oauth-authorize</uri>
          <endpoint-kind>oauth-authorize</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-introspect</id>
          <uri>/oauth/v2/oauth-introspect</uri>
          <endpoint-kind>oauth-introspect</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-revoke</id>
          <uri>/oauth/v2/oauth-revoke</uri>
          <endpoint-kind>oauth-revoke</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-session</id>
          <uri>/oauth/v2/oauth-session</uri>
          <endpoint-kind>oauth-session</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-token</id>
          <uri>/oauth/v2/oauth-token</uri>
          <endpoint-kind>oauth-token</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>token-service-userinfo</id>
          <uri>/oauth/v2/oauth-userinfo</uri>
          <endpoint-kind>oauth-userinfo</endpoint-kind>
        </endpoint>
      </endpoints>
      <token-issuers>
        <default-token-issuer>
          <jwt-issuer-settings>
            <algorithm>ES256</algorithm>
            <signing-key-id>default-signing-key</signing-key-id>
          </jwt-issuer-settings>
          <default-data-source>default-datasource</default-data-source>
        </default-token-issuer>
      </token-issuers>
    </profile>
    <profile>
      <id>user-service</id>
      <type xmlns:um="https://curity.se/ns/conf/profile/user-management">um:user-management-service</type>
      <settings>
        <user-management-service xmlns="https://curity.se/ns/conf/profile/user-management">
          <api-authentication>
            <oauth-service>token-service</oauth-service>
          </api-authentication>
          <authorization-manager>default</authorization-manager>
          <user-account-data-source>default-datasource</user-account-data-source>
          <token-data-source>default-datasource</token-data-source>
          <credential-management>
            <credential-manager>default-credential-manager</credential-manager>
          </credential-management>
        </user-management-service>
      </settings>
      <endpoints>
        <endpoint>
          <id>graphql-users-service</id>
          <uri>/users/graphql</uri>
          <client-authentication>disallow</client-authentication>
          <endpoint-kind>um-graphql-api</endpoint-kind>
        </endpoint>
        <endpoint>
          <id>user-service</id>
          <uri>/users</uri>
          <endpoint-kind>um-api</endpoint-kind>
        </endpoint>
      </endpoints>
    </profile>
  </profiles>
  <facilities xmlns="https://curity.se/ns/conf/base">
    <http>
      <client>
        <id>internal_http_client</id>
        <tls>
          <use-truststore>true</use-truststore>
        </tls>
      </client>
    </http>
    <data-sources>
      <data-source>
        <id>default-datasource</id>
        <jdbc xmlns="https://curity.se/ns/ext-conf/jdbc">
          <connection-string tags=" I3tEQl9DT05ORUNUSU9OfQ== ">data:text/plain;aes,v:S.ZFVHQXJRRDUweVJMVXJZTA==.PEq8ey0slUkGB4vnZORyUA==.WrQdycKlCRdS0px2XRgz-Y-aVgtGvLWOOWuCxDk2SKnJ8Ejhdsg0znudGkZmC361-tIGMO09XKK5TZW4nd3pDo5w2cAHM9X5lHAdLXD6XBEBcm68MvLGwOWsJF6A-CnkjrIRQtSn1rndBSEtG5ZFCw==.T-NsKp8oS2-fugWsq5MbsBZU2VgGmwJ1IwY3V_6k9no=</connection-string>
          <standard-credentials-mode>
          </standard-credentials-mode>
          <driver>com.microsoft.sqlserver.jdbc.SQLServerDriver</driver>
          <password tags=" I3tEQl9QQVNTV09SRH0= ">data:text/plain;aes,v:S.akxGQWlNMlA5VGRUWFFmbA==.Uc71fsPU0PnzXlkeQQLTew==.lTsHdEe0G_LgFJ9eaY8rcg==.bRC9BHjf0FEdsGP3mQAZBoOjSKkHn6dxaRG__8jRZmY=</password>
          <username tags=" I3tEQl9VU0VSfQ== ">idsvruser</username>
        </jdbc>
      </data-source>
    </data-sources>
    <email-providers>
      <email-provider>
        <id>smtp</id>
        <smtp>
          <smtp-host>smtpserver</smtp-host>
          <smtp-port>1025</smtp-port>
          <default-sender>noreply@maildev</default-sender>
          <username>noreply@maildev</username>
          <password>Password1</password>
        </smtp>
      </email-provider>
    </email-providers>
    <crypto>
      <ssl>
        <server-truststore>
          <server-certificate>
            <id>Curity_Identity_Server_Training_Courses_Local_CA</id>
            <curve-name>P-256</curve-name>
            <keystore>data:application/pem;aes,v:S.QVVhblY4QnpNNDhCdk90aQ==.l4PD0F73zfWNP23whAcF2Q==.cC42uRLN14681iVr2gAXJKgJU9_Dr1DJPlsS3tm2Vb6YhrlelFlXhVx6ZhiGjOcL6sLyEH_1oJ3b2KQCPslm5FPV7z97Xvc-TFqWunxWsNG79rlPW7zybnwpfaY637mgTQumjSv4_ehXNod9br8AHFkO13RuoCwtfYW3mMDMGTTP7k9ESNH8KLHeh-BXJ4jCgrLroxxRnnzgIW9ffHEMUgVe9YodSyHUAUJPoZ1U11dE7bRrDEbiMDKJuCu5a7SxImHca7gTD54aMHwHPD9TAuzSUdxv0W5pk4q2MqDFNdnEMsCOlUEnRkIyDkH1RkK5w2b9YUzgXqDj4ejlfPcdTglsriMvtNjQvjupaf4ZpWoImZ-fM4vfRCN5N8ylCq3FoZpJcNy488L3ll7TqaQflFSFTC1Z_KWEPt3xY_torqr13WHJMl9lPFuJfjNhWnpHh_7LHcVUJnapqF648vK2KhHCBuXzp3WcqxRDHQlChIikSw0ZdGCOQIXldlGc-vJuxw7vgYh-748C-U6PDIuIHTzUp20gGcz4ol6CGFLoGz9cOYnSxiJLKr_7pN4wf-DtWY-m_2GXRKjTn2VrECZD8rVuD1PyjzkJzBmzBmzGFOoS3n_XjHX58sMXYYk5U_LKoJ1gXVTkePIR8Y2LfzealSloX-PYHWVaIoOaTYEVh2mYdxrOEGoj4D4pr7tX8_MElCHdG6G17xYD5Kkex8BtzflyM0FkRDobhuIoFgWnLkT2eI0xwf30yY9kOWekSbkHTOyUYFKLxlwHtalwmO2kX4-CXnBeEQZ13ULYwS1-S0NbxFR7kVOa8MSJFO1Uyd7iJKf2TJVKHa0PczVn0Pbg84JSgN2eHjJRhlT3vMleYqfi5buXCIxnLbX1zk5Ug92CatOE5Yw0DQaYHaLebOr2c9a55Q3-RJwWlupXCFsJYekG99AFc9ZkPIrsSaoyWHrkrUk_EsjJqfAnEBM-TzXeOdwHvMaViS8lWGCGQwMBaMUeqguKedBLczcDVBvT-fuU_y50tEw4Wgx1k0ycHG8JD7qP-0NyY7rGon0InQjKhQ2C5Nto7tK2wYk3XeiKjyHR.DLn2t3LxuaJDygmYfdfH-k1ctAbNYP8nJ_4tdHqIVE0=</keystore>
            <type>elliptic-curve</type>
          </server-certificate>
        </server-truststore>
      </ssl>
      <signing-keys>
        <signing-key>
          <id>default-signing-key</id>
          <curve-name>P-256</curve-name>
          <keystore tags=" I3tTSUdOSU5HX0tFWX0= ">data:application/p12;aes,v:S.dTNYSnJjR2k4Y2FYcW80Ug==.xKr4uQo2qyHUnhqNHUhvuw==.IbrZDwUMe-6R4HUdGQfO5TSJ0wA38hZywLt4sZ11cvBqk9EUQSHDT9NQs-gDRfpH_lfHVtMdoq-jL590_nTjQusiqGcooQTLdjDatmEbRGDRpvt3K5XC1PomveU0qK8A0g183UJjDg7d8T75w80ZNJCIlsQZxZJLxLSSE_JCEZHz_2-RNMSylaUVoDilKMZTkyAX0Y41oUPMca4hNd-56u1gDTPmP7qQKpjTUPEtl1KkUZZKiXsIIRkpHdG3TUdU5X3gkRYIJMxBlkLTjr1Vykeb3ipwS5nN6PCOf23qi6Z5r74BBtqzS_H0Md7kLpujolb5w0i6CyaOTUs9E7iFPsWpxVgg8FvmFZwB17sdZ-_WEyAq1dr5YbSb2Yf07hmRqX3GrbWcCdNLdr5uZSBcHa9BXtml0NYG9mgDWGU3GCVPV0p0dIl5Jd68VPrzP6Q47rjEmkvV1ZhY30S_M2PFeA8-rEACWTzUUwDhSYKX_-uk75VdQqhyvxx4nCYfeFguikbLxiD1IM67G5eQzXSzuTAEg5ph1JS91W3NhQxIhAfFpDt1WS23dXs5Lwf--BFK-0C-5LZPneSMAQmXCvFOjXX7mSCOCcF-QM21lXcZu_yUzmaKF135OWayV5w2uPGZxkEEWABZpb9OznY2tIZ9rGd6mhQhG2G3C3K58GQy-_QnW-5YxCfdDLbMzwIBx4p0bYZ4YNR8eiXAM9hYo0m9GAGT10_MlUSqLbtj8YSmxn0JzjhZs7i3YzLKJHQxx4z4ohvwkrdHr0cwiAyagREix7sXXsiKNFlXFpUXiZmd6jgOYyTCsaFZK8ubu-rspBXYqDc1YsgE9JzFYIPZmVsL9BXs4GyUf9hkGwF722_KooGFoNR6qAb6QFCy6Ur6I8E06xEtNAM_lLRiXGr7SElEOT8o5IneIwDRaoeWYqtkBpLlG-8VAYmG312pENvFZ0hQgbfxZhsOPAcR5gXm2j1YyIonqKZ1CHes_ga6w0LPODspvnMvnU-bj1IWnY-oL1rB05bNN8F1pnjt3-9nCXN0PxmnlYBJgf6uZxDX4YgNfRB5oFXTOUMIIjBlMuuw04FkY18RajMG-XlVSYnCvW64ytppIlItsnktZC6opUtln_ZHV8iw35P4yCIC_CweOukrf701mLka607e7LBPjxp3Zhu_IfpepEmaR6Y5E_2eaUj5yphwoQgrsgNEamg2oLxkJeRj5HTzLVVM5eIoL29TWtLpJuC4V6exAwlIJjIX0j-NQbNXOXRnv6daJWvBIyfmw4ilXXdJ8Gb0DGaYDmJRewVhATwu0ftNfJhJo8qzBSztY7KcFoITBvUbvWX_iTd06305yvkh7bCQEfau587j5Tgy9YeuwR-Zel8aBsWoRZ6P-yBzX2uHaP74B1y80hQjsn3vJQtUYkisYt5QLGxtm1qSt4SKIuAocYbTmcXglEgQgR2RBZpo9L79aHSH7Rpo.vjEQIfSQPdmLgFl1ScygvV5KlOHyID5UWjqg6bR9wrg=</keystore>
          <type>elliptic-curve</type>
        </signing-key>
      </signing-keys>
    </crypto>
    <caching-services>
      <default-caching-service>
        <data-source>default-datasource</data-source>
      </default-caching-service>
    </caching-services>
  </facilities>
  <processing xmlns="https://curity.se/ns/conf/base">
    <procedures>
      <transformation-procedure>
        <id>set-subject-procedure</id>
        <script>LyoqCiAqIFRoaXMgaXMgYW4gZXhhbXBsZSBwcm9jZWR1cmUgdGhhdCBwZXJmb3JtcyBubyB0cmFuc2Zvcm1hdGlvbgogKiBAcGFyYW0ge3NlLmN1cml0eS5pZGVudGl0eXNlcnZlci5wcm9jZWR1cmVzLmNvbnRleHQuVHJhbnNmb3JtYXRpb25Qcm9jZWR1cmVDb250ZXh0fSBjb250ZXh0CiAqIEByZXR1cm5zIHsqfQogKi8KZnVuY3Rpb24gcmVzdWx0KGNvbnRleHQpIHsKICB2YXIgYXR0cmlidXRlcyA9IGNvbnRleHQuYXR0cmlidXRlTWFwOwogIGF0dHJpYnV0ZXMuc3ViamVjdCA9IGF0dHJpYnV0ZXMuZW1haWw7CgogIGlmIChhdHRyaWJ1dGVzLmdyb3VwcykgewogICAgYXR0cmlidXRlcy5ncm91cHMgPSBbImFkbWluIl07CiAgfQoKICByZXR1cm4gYXR0cmlidXRlczsKfQ==</script>
      </transformation-procedure>
    </procedures>
    <authorization-managers>
      <authorization-manager>
        <id>default</id>
        <attribute xmlns="https://curity.se/ns/ext-conf/attribute">
          <rule-list>
            <name>migrations</name>
            <description>A rule list for migrations of customer users from other systems</description>
            <enforcement-restrictions>
              <default-allow-read>true</default-allow-read>
              <default-allow-write>true</default-allow-write>
              <require-subject-match>false</require-subject-match>
            </enforcement-restrictions>
            <rule>
              <name>default</name>
              <access-operation>create</access-operation>
              <access-operation>read</access-operation>
              <access-operation>update</access-operation>
              <access-operation>delete</access-operation>
              <attribute>account</attribute>
              <decision>allow</decision>
            </rule>
            <select-rule-list-when>
              <context-requirement>user-management-scim</context-requirement>
              <scope-requirement>
                <scope>accounts_migration</scope>
              </scope-requirement>
            </select-rule-list-when>
          </rule-list>
          <rule-list>
            <name>dashboard</name>
            <description>A rule list for employees who use the DevOps dashboard</description>
            <enforcement-restrictions>
              <default-allow-read>true</default-allow-read>
              <default-allow-write>true</default-allow-write>
              <require-subject-match>false</require-subject-match>
            </enforcement-restrictions>
            <rule>
              <name>default</name>
              <access-operation>create</access-operation>
              <access-operation>read</access-operation>
              <access-operation>update</access-operation>
              <access-operation>delete</access-operation>
              <attribute>account</attribute>
              <decision>allow</decision>
            </rule>
            <select-rule-list-when>
              <claim-requirement>
                <name>groups</name>
                <applicability>all-of</applicability>
                <value>admin</value>
              </claim-requirement>
              <context-requirement>user-management-graphql</context-requirement>
              <scope-requirement>
                <scope>urn:se:curity:scopes:admin:api</scope>
              </scope-requirement>
            </select-rule-list-when>
          </rule-list>
        </attribute>
      </authorization-manager>
    </authorization-managers>
    <account-managers>
      <account-manager>
        <id>default-account-manager</id>
        <username-is-email>true</username-is-email>
        <account-data-source>default-datasource</account-data-source>
      </account-manager>
    </account-managers>
    <credential-managers>
      <credential-manager>
        <id>default-credential-manager</id>
        <Sha2WithSha256>
        </Sha2WithSha256>
        <data-source-backed>
          <data-source-id>default-datasource</data-source-id>
        </data-source-backed>
      </credential-manager>
    </credential-managers>
  </processing>
</config>